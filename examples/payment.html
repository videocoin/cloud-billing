<html>
<head>
    <title>Make Payment</title>
    <script src="https://js.stripe.com/v3/"></script>
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            var stripe = Stripe('pk_test_k8dPL3dVynGZUOobj4WhS5nT00isBnI5Ow');

            $('#makeButton').click(() => {
                var url = "http://127.0.0.1:8080/api/v1/billing/pay";
                var data = JSON.stringify({"amount": "100"});
                $.ajax({
                    "url": url,
                    "type": "post",
                    "data": data,
                    "dataType": "json",
                    "headers": {
                        "Authorization": "Bearer " + $("#token").val(),
                    },
                    success: function(data) {
                        stripe.redirectToCheckout({
                            sessionId: data['session_id']
                        }).then(function (result) {
                            console.log("stripe result", result);
                        });
                    }
                });
            })
        })
    </script>
    <style type="text/css">
    body {
        font-size: 16px;
    }
    div {
        margin: 10px auto;
    }
    #token { 
        font-size: 16px;
        width: 100%;
    }
    #makeButton {
        font-size: 16px;
        padding: 10px 20px;
    }
    </style>
</head>
<body>
    <div>
        <input id="token" value="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjowLCJleHAiOjE1ODUzMjc3MTksInN1YiI6IjRhNGI0Y2NhLTI5YWEtNDc1ZS00Y2JkLTc3YmE0YWFkNjNlZCJ9.U_uJpCYy0jIESFSk_08qi4eZuSA2aEP5u7nAA5_Xdak">
    </div>
    <div>
        <button id="makeButton">Make Payment</button>
    </div>
</body>
</html>